<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Ujaval Gandhi" />


<title>Python Foundation for Spatial Analysis (Course Material)</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Courses</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="http://spatialthoughts.com">Back to Main Site</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Python Foundation for Spatial Analysis (Course Material)</h1>
<h3 class="subtitle">A gentle introduction to Python programming with a focus on spatial data.</h3>
<h4 class="author">Ujaval Gandhi</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#get-the-data-package">Get the Data Package</a></li>
<li><a href="#installation-and-setting-up-the-environment">Installation and Setting up the Environment</a></li>
<li><a href="#hello-world">Hello World</a></li>
<li><a href="#variables">Variables</a><ul>
<li><a href="#strings">Strings</a></li>
<li><a href="#numbers">Numbers</a></li>
<li><a href="#exercise">Exercise</a></li>
</ul></li>
<li><a href="#data-structures">Data Structures</a><ul>
<li><a href="#tuples">Tuples</a></li>
<li><a href="#lists">Lists</a></li>
<li><a href="#sets">Sets</a></li>
<li><a href="#dictionaries">Dictionaries</a></li>
<li><a href="#exercise-1">Exercise</a></li>
</ul></li>
<li><a href="#string-operations">String Operations</a><ul>
<li><a href="#exercise-2">Exercise</a></li>
<li><a href="#escaping-characters">Escaping characters</a></li>
<li><a href="#printing-strings">Printing Strings</a></li>
</ul></li>
<li><a href="#functions">Functions</a><ul>
<li><a href="#exercise-3">Exercise</a></li>
</ul></li>
<li><a href="#the-python-standard-library">The Python Standard Library</a><ul>
<li><a href="#calculating-distance">Calculating Distance</a></li>
<li><a href="#exercise-4">Exercise</a></li>
</ul></li>
<li><a href="#third-party-modules">Third-party Modules</a><ul>
<li><a href="#installing-third-party-libraries">Installing third-party libraries</a></li>
<li><a href="#calculating-distance-1">Calculating Distance</a></li>
<li><a href="#exercise-5">Exercise</a></li>
</ul></li>
<li><a href="#loops-and-conditionals">Loops and Conditionals</a><ul>
<li><a href="#for-loops">For Loops</a></li>
</ul></li>
<li><a href="#conditionals">Conditionals</a><ul>
<li><a href="#control-statements">Control Statements</a></li>
<li><a href="#exercise-6">Exercise</a></li>
</ul></li>
<li><a href="#reading-files">Reading Files</a><ul>
<li><a href="#exercise-7">Exercise</a></li>
</ul></li>
<li><a href="#reading-csv-files">Reading CSV Files</a><ul>
<li><a href="#using-enumerate-function">Using <code>enumerate()</code> function</a></li>
<li><a href="#using-with-statement">Using <code>with</code> statement</a></li>
<li><a href="#filtering-rows">Filtering rows</a></li>
<li><a href="#calculating-distance-2">Calculating distance</a></li>
<li><a href="#writing-files">Writing files</a></li>
<li><a href="#exercise-8">Exercise</a></li>
</ul></li>
<li><a href="#license">License</a></li>
</ul>
</div>


<hr />
<p><img src="images/spatial_thoughts_logo.png" width="250pt" style="display: block; margin: auto;" /></p>
<p><strong>This course is also offered as an online class. Visit <a href="https://spatialthoughts.com/events/">www.spatialthoughts.com/events</a> to know details of upcoming sessions. You may also sign up for <a href="https://mailchi.mp/1d44f6c0c955/spatialthoughts">my mailing list</a> to know when new sessions are scheduled.</strong></p>
<hr />

<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This class covers Python from the very basics. Suitable for GIS practitioners with no programming background or python knowledge. The course will introduce participants to basic programming concepts, libraries for spatial analysis, geospatial APIs and techniques for building spatial data processing pipelines.</p>
</div>
<div id="get-the-data-package" class="section level1">
<h1>Get the Data Package</h1>
<p>The code examples in this class use a variety of datasets. All the required datasets are supplied to you in the <code>python_foundation.zip</code> with your purchase. Unzip this file to the <code>Downloads</code> directory. All code examples assume the data is available in the <code>&lt;home folder&gt;/Downloads/python_foundation/</code> directory.</p>
</div>
<div id="installation-and-setting-up-the-environment" class="section level1">
<h1>Installation and Setting up the Environment</h1>
<p>There are many ways to install Python on your system. Many operating systems comes with a Python distribution built-in too. If you use software such as QGIS - it comes with its own version of Python. Working on Python projects typically require installing third-party packages (i.e. tools). As these pacakges have different dependencies - they often cause conflicts and errors due to different versions of Python on your system.</p>
<p>An easy and reliable way to get a Python installation on your system is via <a href="https://www.anaconda.com/">Anaconda</a>. For this course, we will use the Anaconda3 Individual Edition to install Python and required spatial analysis packages.</p>
<blockquote>
<p>Many Python tool names have references to the reptile world. The default Python package manager is called <a href="https://pypi.org/project/pip/">Pip</a> which references the process of hatching eggs. Interestingly, the naming of the Python language itself had <a href="https://en.wikipedia.org/wiki/Guido_van_Rossum#Python">nothing to do with reptiles</a>.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><a href="https://www.anaconda.com/products/individual">Download the Anaconda Installer</a> for Python 3.7 for your operating system. Once downloaded, double click the installer and install it into the default suggested directory. Select an install for <em>Just Me</em> and use default settings.</li>
</ol>
<blockquote>
<p>Note: Install Anaconda to a directory path that does not contain spaces or unicode characters.</p>
</blockquote>
<p><img src="images/python_foundation/conda1.png" style="display: block; margin: auto;" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Once installed, launch the <em>Anaconda Navigator</em> program. It is a good practice to create a new <em>environment</em> for each of your Python projects. An environment is a space where you will install required packages. Many packages may contain conflicting requirements which could prevent them all being installed into a single environment. Having a separate environment isolates your project from such problems. Click on the <em>Environments</em> tab.</li>
</ol>
<p><img src="images/python_foundation/conda2.png" style="display: block; margin: auto;" /></p>
<ol start="3" style="list-style-type: decimal">
<li>Click the <em>+ Create</em> button and name the environment as <code>python_foundation</code>. Click <em>Create</em>.</li>
</ol>
<p><img src="images/python_foundation/conda3.png" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li>Once created, click the <em>Channels</em> button. A channel is a repository where packages are hosted. The default channel is good for most purposes. But some packages we require for this class are not available in the default channel, so we need to add another channel. In the <em>Manage channels</em> dialog, click <em>Add</em> and enter <code>conda-forge</code>. Press <em>Enter</em>.</li>
</ol>
<blockquote>
<p>Learn more about <a href="https://conda-forge.org/docs/user/introduction.html">conda-forge</a></p>
</blockquote>
<p><img src="images/python_foundation/conda4.png" style="display: block; margin: auto;" /></p>
<ol start="5" style="list-style-type: decimal">
<li>Click the <em>Update Channels</em> button.</li>
</ol>
<p><img src="images/python_foundation/conda5.png" style="display: block; margin: auto;" /></p>
<ol start="6" style="list-style-type: decimal">
<li>Once the update is done, search for the package <code>geopandas</code>. This is a package that allows you to work with vector geospatial data in Python. Select the checkbox next to the first result and click <em>Apply</em> to install the package with all its dependencies.</li>
</ol>
<p><img src="images/python_foundation/conda6.png" style="display: block; margin: auto;" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Similarly, search and install the following packages</li>
</ol>
<ul>
<li><code>geopy</code></li>
<li><code>rasterio</code></li>
</ul>
<p><img src="images/python_foundation/conda7.png" style="display: block; margin: auto;" /></p>
<ol start="8" style="list-style-type: decimal">
<li>Switch to the <em>Home</em> tab. Ensure that you have the <em>python_foundation</em> environemnt selected. We will now install some programs which allow us to write and execute Python scripts. From the home screen, install the <code>JupyterLab</code> and <code>CMD.exe prompt</code> applications. (Mac and Linux users can skip the CMD.exe prompt install).</li>
</ol>
<p><img src="images/python_foundation/conda8.png" style="display: block; margin: auto;" /></p>
<ol start="9" style="list-style-type: decimal">
<li>After the installation completes, click <em>Launch</em> button for the <em>JupyterLab</em> application. JupyterLab is a web application that allows you to write, document and run Python code. It allow you to interactively run small bits of code and see the results. It also support a variety of output formats such as charts or maps - making it an ideal platform for data science projects. We will be using Jupyter notebooks for all exercises in this course.</li>
</ol>
<blockquote>
<p>The name Jupyter comes from the 3 primary programming languages it supports - Julia, Python and R.</p>
</blockquote>
<p><img src="images/python_foundation/conda9.png" style="display: block; margin: auto;" /></p>
<ol start="10" style="list-style-type: decimal">
<li>A new browser tab will open with an instance of JupterLab. Click the <em>Python 3</em> button under <em>Notebooks</em>.</li>
</ol>
<p><img src="images/python_foundation/conda10.png" style="display: block; margin: auto;" /></p>
<ol start="11" style="list-style-type: decimal">
<li>Enter the following statements in the first cell and click the <em>Run</em> button. If the code executes without any errors - your installation was successful and you are ready to start coding. If you get an <em>ImportError</em>, repeat the installation steps carefully again.</li>
</ol>
<p><img src="images/python_foundation/conda11.png" style="display: block; margin: auto;" /></p>

</div>
<div id="hello-world" class="section level1">
<h1>Hello World</h1>
<p>When learning a new programming language, it is customary to first learn how to print ‘Hello World!’. While a bit quirky, it is a useful first step to know how to send input to the program and where to see the output. In Python, you can use the built-in <code>print()</code> function to print the greeting <code>&quot;Hello World!&quot;</code></p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(<span class="st">&#39;Hello World!&#39;</span>)</code></pre></div>
<hr />

</div>
<div id="variables" class="section level1">
<h1>Variables</h1>
<div id="strings" class="section level2">
<h2>Strings</h2>
<p>A string is a sequence of letters, numbers, and punctuation marks - or commonly known as <strong>text</strong></p>
<p>In Python you can create a string by typing letters between single or double quotation marks.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">city <span class="op">=</span> <span class="st">&#39;San Fransico&#39;</span>
state <span class="op">=</span> <span class="st">&#39;California&#39;</span>
<span class="bu">print</span>(city, state)</code></pre></div>
<pre><code>San Fransico California</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(city <span class="op">+</span> state)</code></pre></div>
<pre><code>San FransicoCalifornia</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(city <span class="op">+</span> <span class="st">&#39;,&#39;</span> <span class="op">+</span> state)</code></pre></div>
<pre><code>San Fransico,California</code></pre>
</div>
<div id="numbers" class="section level2">
<h2>Numbers</h2>
<p>Python can handle several types of numbers, but the two most common are:</p>
<ul>
<li><strong>int</strong>, which represents integer values like 100, and</li>
<li><strong>float</strong>, which represents numbers that have a fraction part, like 0.5</li>
</ul>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">population <span class="op">=</span> <span class="dv">881549</span>
latitude <span class="op">=</span> <span class="fl">37.7739</span>
longitude <span class="op">=</span> <span class="op">-</span><span class="fl">121.5687</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(<span class="bu">type</span>(population))</code></pre></div>
<pre><code>&lt;class &#39;int&#39;&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(<span class="bu">type</span>(latitude))</code></pre></div>
<pre><code>&lt;class &#39;float&#39;&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">elevation_feet <span class="op">=</span> <span class="dv">934</span>
elevation_meters <span class="op">=</span> elevation_feet <span class="op">*</span> <span class="fl">0.3048</span>
<span class="bu">print</span>(elevation_meters)</code></pre></div>
<pre><code>284.6832</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">area_sqmi <span class="op">=</span> <span class="fl">46.89</span>
density <span class="op">=</span> population <span class="op">/</span> area_sqmi
<span class="bu">print</span>(density)</code></pre></div>
<pre><code>18800.362550650458</code></pre>
</div>
<div id="exercise" class="section level2">
<h2>Exercise</h2>
<p>We calculated the population density in number of people per square mile. Calculate and print the density in number of people per square kilometers.</p>
<ul>
<li>Hint1: 1 mile = 1.60934 kilometers</li>
<li>Hint2: To calculate exponential of a number in Python, you use the ** notation. x² is written as x**2</li>
</ul>
<p>Create a code cell below this one, type in the code and run the cell. The output should be 7258.8966</p>
<hr />

</div>
</div>
<div id="data-structures" class="section level1">
<h1>Data Structures</h1>
<div id="tuples" class="section level2">
<h2>Tuples</h2>
<p>A <em>tuple</em> is a sequence of objects. It can have any number of objects inside. In Python tuples are written with round brackets <strong>()</strong>.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">latitude <span class="op">=</span> <span class="fl">37.7739</span>
longitude <span class="op">=</span> <span class="op">-</span><span class="fl">121.5687</span>
coordinates <span class="op">=</span> (latitude, longitude)
<span class="bu">print</span>(coordinates)</code></pre></div>
<pre><code>(37.7739, -121.5687)</code></pre>
<p>You can access each item by its position, i.e. <em>index</em>. In programming, the counting starts from 0. So the first item has an index of 0, the second item an index of 1 and so now. The index has to be put inside square brackets <strong>[]</strong>.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">y <span class="op">=</span> coordinates[<span class="dv">0</span>]
x <span class="op">=</span> coordinates[<span class="dv">1</span>]
<span class="bu">print</span>(x, y)</code></pre></div>
<pre><code>-121.5687 37.7739</code></pre>
</div>
<div id="lists" class="section level2">
<h2>Lists</h2>
<p>A <strong>list</strong> is similar to a tuple - but with a key difference. With tuples, once created, they cannot be changed, i.e. they are immutable. But lists are mutable. You can add, delete or change elements within a list. In Python, lists are written with square brackets <strong>[]</strong></p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">cities <span class="op">=</span> [<span class="st">&#39;San Francisco&#39;</span>, <span class="st">&#39;Los Angeles&#39;</span>, <span class="st">&#39;New York&#39;</span>, <span class="st">&#39;Atlanta&#39;</span>]
<span class="bu">print</span>(cities)</code></pre></div>
<pre><code>[&#39;San Francisco&#39;, &#39;Los Angeles&#39;, &#39;New York&#39;, &#39;Atlanta&#39;]</code></pre>
<p>You can access the elements from a list using index the same way as tuples.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(cities[<span class="dv">0</span>])</code></pre></div>
<pre><code>San Francisco</code></pre>
<p>You can call <code>len()</code> function with any Python object and it will calculates the size of the object.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(<span class="bu">len</span>(cities))</code></pre></div>
<pre><code>4</code></pre>
<p>We can add items to the list using the <code>append()</code> method</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">cities.append(<span class="st">&#39;Boston&#39;</span>)
<span class="bu">print</span>(cities)</code></pre></div>
<pre><code>[&#39;San Francisco&#39;, &#39;Los Angeles&#39;, &#39;New York&#39;, &#39;Atlanta&#39;, &#39;Boston&#39;]</code></pre>
<p>As lists are <em>mutable</em>, you will see that the size of the list has now changed</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(<span class="bu">len</span>(cities))</code></pre></div>
<pre><code>5</code></pre>
<p>Another useful method for lists is <code>sort()</code> - which can sort the elements in a list.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">cities.sort()
<span class="bu">print</span>(cities)</code></pre></div>
<pre><code>[&#39;Atlanta&#39;, &#39;Boston&#39;, &#39;Los Angeles&#39;, &#39;New York&#39;, &#39;San Francisco&#39;]</code></pre>
<p>The default sorting is in <em>ascending</em> order. If we wanted to sort the list in a <em>decending</em> order, we can call the function with <code>reverse=True</code></p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">cities.sort(reverse<span class="op">=</span><span class="va">True</span>)
<span class="bu">print</span>(cities)</code></pre></div>
<pre><code>[&#39;San Francisco&#39;, &#39;New York&#39;, &#39;Los Angeles&#39;, &#39;Boston&#39;, &#39;Atlanta&#39;]</code></pre>
</div>
<div id="sets" class="section level2">
<h2>Sets</h2>
<p>Sets are like lists, but with some interesting properties. Mainly that they contain only unique values. It also allows for <em>set operations</em> - such as <em>intersection</em>, <em>union</em> and <em>difference</em>. In practice, the sets are typically created from lists.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">capitals <span class="op">=</span> [<span class="st">&#39;Sacramento&#39;</span>, <span class="st">&#39;Boston&#39;</span>, <span class="st">&#39;Austin&#39;</span>, <span class="st">&#39;Atlanta&#39;</span>]
capitals_set <span class="op">=</span> <span class="bu">set</span>(capitals)
cities_set <span class="op">=</span> <span class="bu">set</span>(cities)

capital_cities <span class="op">=</span> capitals_set.intersection(cities_set)
<span class="bu">print</span>(capital_cities)</code></pre></div>
<pre><code>{&#39;Atlanta&#39;, &#39;Boston&#39;}</code></pre>
<p>Sets are also useful in finding unique elements in a list. Let’s merge the two lists using the <code>extend()</code> method. The resulting list will have duplicate elements. Creating a set from the list removes the duplicate elements.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">cities.extend(capitals)
<span class="bu">print</span>(cities)
<span class="bu">print</span>(<span class="bu">set</span>(cities))</code></pre></div>
<pre><code>[&#39;San Francisco&#39;, &#39;New York&#39;, &#39;Los Angeles&#39;, &#39;Boston&#39;, &#39;Atlanta&#39;, &#39;Sacramento&#39;, &#39;Boston&#39;, &#39;Austin&#39;, &#39;Atlanta&#39;]
{&#39;Los Angeles&#39;, &#39;New York&#39;, &#39;Sacramento&#39;, &#39;San Francisco&#39;, &#39;Austin&#39;, &#39;Atlanta&#39;, &#39;Boston&#39;}</code></pre>
</div>
<div id="dictionaries" class="section level2">
<h2>Dictionaries</h2>
<p>In Python dictionaries are written with curly brackets <strong>{}</strong>. Dictionaries have <em>keys</em> and <em>values</em>. With lists, we can access each element by its index. But a dictionary makes it easy to access the element by name. Keys and values are separated by a colon <strong>:</strong>.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">data <span class="op">=</span> {<span class="st">&#39;city&#39;</span>: <span class="st">&#39;San Francisco&#39;</span>, <span class="st">&#39;population&#39;</span>: <span class="dv">881549</span>, <span class="st">&#39;coordinates&#39;</span>: (<span class="op">-</span><span class="fl">122.4194</span>, <span class="fl">37.7749</span>) }
<span class="bu">print</span>(data)</code></pre></div>
<pre><code>{&#39;city&#39;: &#39;San Francisco&#39;, &#39;population&#39;: 881549, &#39;coordinates&#39;: (-122.4194, 37.7749)}</code></pre>
<p>You can access an item of a dictionary by referring to its key name, inside square brackets.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(data[<span class="st">&#39;city&#39;</span>])</code></pre></div>
<pre><code>San Francisco</code></pre>
</div>
<div id="exercise-1" class="section level2">
<h2>Exercise</h2>
<p>From the dictionary below, how do you access the latitude and longitude values? print the latitude and longitude of new york city by extracting it from the dictionary below.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">nyc_data <span class="op">=</span> {<span class="st">&#39;city&#39;</span>: <span class="st">&#39;New York&#39;</span>, <span class="st">&#39;population&#39;</span>: <span class="dv">8175133</span>, <span class="st">&#39;coordinates&#39;</span>: (<span class="fl">40.661</span>, <span class="op">-</span><span class="fl">73.944</span>) }</code></pre></div>
<hr />

</div>
</div>
<div id="string-operations" class="section level1">
<h1>String Operations</h1>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">city <span class="op">=</span> <span class="st">&#39;San Francisco&#39;</span>
<span class="bu">print</span>(<span class="bu">len</span>(city))</code></pre></div>
<pre><code>13</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(city.split())</code></pre></div>
<pre><code>[&#39;San&#39;, &#39;Francisco&#39;]</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(city.upper())</code></pre></div>
<pre><code>SAN FRANCISCO</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">city[<span class="dv">0</span>]</code></pre></div>
<pre><code>&#39;S&#39;</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">city[<span class="op">-</span><span class="dv">1</span>]</code></pre></div>
<pre><code>&#39;o&#39;</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">city[<span class="dv">0</span>:<span class="dv">3</span>]</code></pre></div>
<pre><code>&#39;San&#39;</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">city[<span class="dv">4</span>:]</code></pre></div>
<pre><code>&#39;Francisco&#39;</code></pre>
<div id="exercise-2" class="section level2">
<h2>Exercise</h2>
<p>Use the string slicing to print the last 5 characters of a string.</p>
</div>
<div id="escaping-characters" class="section level2">
<h2>Escaping characters</h2>
<p>Certain characters are special since they are by Python language itself. For example, the quote character <strong>’</strong> is used to define a string. What do you do if your string contains a quote character?</p>
<p>In Python strings, the backslash <strong>\</strong> is a special character, also called the <strong>escape</strong> character. Prefixing any character with a backslash makes it an ordinary character. (Hint: Prefixing a backslash with a backshalsh makes it ordinary too!)</p>
<p>It is also used for representing certain whitespace characters, \n is a newline, \t is a tab etc.</p>
<p>Remove the # from the cell below and run it.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># my_string = &#39;It&#39;s a beautiful day!&#39;</span></code></pre></div>
<p>We can fix the error by espacing the single quote within the string.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">my_string <span class="op">=</span> <span class="st">&#39;It</span><span class="ch">\&#39;</span><span class="st">s a beautiful day!&#39;</span>
<span class="bu">print</span>(my_string)</code></pre></div>
<pre><code>It&#39;s a beautiful day!</code></pre>
<p>Alternatively, you can also use double-quotes if your string contains a single-quote.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">my_string <span class="op">=</span> <span class="st">&quot;It&#39;s a beautiful day!&quot;</span></code></pre></div>
<p>What if our string contains both single and double quotes?</p>
<p>We can use triple-quotes! Enclosing the string in triple quotes ensures both single and double quotes are treated correctly.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">latitude <span class="op">=</span> <span class="st">&#39;&#39;&#39;37° 46&#39; 26.2992 N&#39;&#39;&#39;</span>
longitude <span class="op">=</span> <span class="st">&#39;&#39;&#39;122° 25&#39; 52.6692&quot; W&#39;&#39;&#39;</span>
<span class="bu">print</span>(latitude, longitude)</code></pre></div>
<pre><code>37° 46&#39; 26.2992 N 122° 25&#39; 52.6692&quot; W</code></pre>
<p>Backslashes pose another problem when dealing with Windows paths</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co">#path = &#39;C:\Users\ujaval&#39;</span>
<span class="co">#print(path)</span></code></pre></div>
<p>Prefixing a string with <strong>r</strong> makes is a <em>Raw string</em>. Which doesn’t interpret backslash as a special character</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">path <span class="op">=</span> <span class="vs">r&#39;C:\Users\ujaval&#39;</span>
<span class="bu">print</span>(path)</code></pre></div>
<pre><code>C:\Users\ujaval</code></pre>
</div>
<div id="printing-strings" class="section level2">
<h2>Printing Strings</h2>
<p>Modern way of creating strings from variables is using the <code>format()</code> method</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">city <span class="op">=</span> <span class="st">&#39;San Fransico&#39;</span>
population <span class="op">=</span> <span class="dv">881549</span>
output <span class="op">=</span> <span class="st">&#39;Population of </span><span class="sc">{}</span><span class="st"> is </span><span class="sc">{}</span><span class="st">.&#39;</span>.<span class="bu">format</span>(city, population)
<span class="bu">print</span>(output)</code></pre></div>
<pre><code>Population of San Fransico is 881549.</code></pre>
<p>You can also use the format method to control the precision of the numbers</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">latitude <span class="op">=</span> <span class="fl">37.7749</span>
longitude <span class="op">=</span> <span class="op">-</span><span class="fl">122.4194</span>

coordinates <span class="op">=</span> <span class="st">&#39;</span><span class="sc">{:.2f}</span><span class="st">,</span><span class="sc">{:.2f}</span><span class="st">&#39;</span>.<span class="bu">format</span>(latitude, longitude)
<span class="bu">print</span>(coordinates)</code></pre></div>
<pre><code>37.77,-122.42</code></pre>
<hr />

</div>
</div>
<div id="functions" class="section level1">
<h1>Functions</h1>
<p>A function is a block of code that takes one or more <em>inputs</em>, does some processing on them and returns one or more <em>outputs</em>. The code within the function runs only when it is called.</p>
<p>A funtion is defined using the <code>def</code> keyword</p>
<pre><code>def my_function():
    ....
    ....
    return something</code></pre>
<p>Functions are useful because they allow us to capture the logic of our code and we can run it with differnt inputs without having to write the same code again and again.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> greet(name):
    <span class="cf">return</span> <span class="st">&#39;Hello &#39;</span> <span class="op">+</span> name

<span class="bu">print</span>(greet(<span class="st">&#39;World&#39;</span>))</code></pre></div>
<pre><code>Hello World</code></pre>
<p>Functions can also take arguments with a default value. This helps make calling the functions simpler for the default behavior while giving an option to pass on extra arguments.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">lat <span class="op">=</span> <span class="fl">37.7739</span>
lng <span class="op">=</span> <span class="op">-</span><span class="fl">121.5687</span>

<span class="kw">def</span> format_coordinates(latitude, longitude, separator<span class="op">=</span><span class="st">&#39;,&#39;</span>):
        <span class="cf">return</span> <span class="st">&#39;</span><span class="sc">{}{}{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(latitude, separator, longitude)

<span class="bu">print</span>(format_coordinates(lat, lng))
<span class="bu">print</span>(format_coordinates(lat, lng, <span class="st">&#39;|&#39;</span>))</code></pre></div>
<pre><code>37.7739,-121.5687
37.7739|-121.5687</code></pre>
<p>The default behavior of Python functions is to take <em>positional arguments</em>. You pass the arguments in the <em>order</em> that is defined by the function. Python allows functions to be called using <em>keyword arguments</em>. When we call functions in this way, the order (position) of the arguments can be changed. The main advantage of using keyword arguments is to make the code more readable and explicit.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span>(format_coordinates(latitude<span class="op">=</span>lat, longitude<span class="op">=</span>lng, separator<span class="op">=</span><span class="st">&#39;;&#39;</span>))</code></pre></div>
<pre><code>37.7739;-121.5687</code></pre>
<div id="exercise-3" class="section level2">
<h2>Exercise</h2>
<p>Functions can take multiple arguments. Let’s write a function to convert coordinates from degrees, minutes, seconds to decimal degrees. This conversion is needed quite often when working with data collected from GPS devices.</p>
<ul>
<li>1 degree is equal to 60 minutes</li>
<li>1 minute is equal to 60 seconds (3600 seconds)</li>
</ul>
<p>To calculate decimal degrees, we can use the formula below: Decimal Degrees = degrees + (minutes/60) + (seconds/3600)</p>
<p>Delete the <code>pass</code> statement and replace it with the code for the formula. If the code is correct, you should see the result 37.773972 -121.568703</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">latitude <span class="op">=</span> (<span class="dv">37</span>, <span class="dv">46</span>, <span class="fl">26.2992</span>)
longitude <span class="op">=</span> (<span class="op">-</span><span class="dv">122</span>, <span class="dv">25</span>, <span class="fl">52.6692</span>)

<span class="kw">def</span> dms_to_decimal(degrees, minutes, seconds):
    <span class="cf">pass</span>

lat_decimal <span class="op">=</span> dms_to_decimal(latitude[<span class="dv">0</span>], latitude[<span class="dv">1</span>], latitude[<span class="dv">2</span>])
lon_decimal <span class="op">=</span> dms_to_decimal(longitude[<span class="dv">0</span>], longitude[<span class="dv">1</span>], longitude[<span class="dv">2</span>])
<span class="bu">print</span>(lat_decimal, lon_decimal)</code></pre></div>
<pre><code>None None</code></pre>
<hr />

</div>
</div>
<div id="the-python-standard-library" class="section level1">
<h1>The Python Standard Library</h1>
<p>Python comes with many built-in modules that offer ready-to-use solutions to common programming problems. To use these modules, you must use the <code>import</code> keyword. Once imported in your Python script, you can use the functions provided by the module in your script.</p>
<p>We will use the built-in <code>math</code> module that allows us to use advanced mathematical functions.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> math</code></pre></div>
<p>You can also import specific functions or constants from the module like below</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">from</span> math <span class="im">import</span> pi
<span class="bu">print</span>(pi)</code></pre></div>
<pre><code>3.141592653589793</code></pre>
<div id="calculating-distance" class="section level2">
<h2>Calculating Distance</h2>
<p>Given 2 points with their Latitude and Longitude coordinates, the Haversine Formula calculates the straight-line distance in meters, assuming that Earth is a sphere.</p>
<p>The formula is simple enough to be implemented in a spreadsheet too. If you are curious, see <a href="https://spatialthoughts.com/2013/07/06/calculate-distance-spreadsheet/">my post</a> about using this formula for calculating distances in a spreadsheet.</p>
<p>We can write a function that accepts a pair of origin and destination coordinates and computes the distance.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">san_francisco <span class="op">=</span> (<span class="fl">37.7749</span>, <span class="op">-</span><span class="fl">122.4194</span>)
new_york <span class="op">=</span> (<span class="fl">40.661</span>, <span class="op">-</span><span class="fl">73.944</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> haversine_distance(origin, destination):
  lat1, lon1 <span class="op">=</span> origin
  lat2, lon2 <span class="op">=</span> destination
  radius <span class="op">=</span> <span class="dv">6371000</span>
  dlat <span class="op">=</span> math.radians(lat2<span class="op">-</span>lat1)
  dlon <span class="op">=</span> math.radians(lon2<span class="op">-</span>lon1)
  a <span class="op">=</span> math.sin(dlat<span class="op">/</span><span class="dv">2</span>) <span class="op">*</span> math.sin(dlat<span class="op">/</span><span class="dv">2</span>) <span class="op">+</span> math.cos(math.radians(lat1)) <span class="op">\</span>
    <span class="op">*</span> math.cos(math.radians(lat2)) <span class="op">*</span> math.sin(dlon<span class="op">/</span><span class="dv">2</span>) <span class="op">*</span> math.sin(dlon<span class="op">/</span><span class="dv">2</span>)
  c <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> math.atan2(math.sqrt(a), math.sqrt(<span class="dv">1</span><span class="op">-</span>a))
  distance <span class="op">=</span> radius <span class="op">*</span> c
  <span class="cf">return</span> distance</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">distance <span class="op">=</span> haversine_distance(san_francisco, new_york)
<span class="bu">print</span>(distance<span class="op">/</span><span class="dv">1000</span>, <span class="st">&#39;km&#39;</span>)</code></pre></div>
<pre><code>4135.374617164737 km</code></pre>
</div>
<div id="exercise-4" class="section level2">
<h2>Exercise</h2>
<p>Find the coordinates of 2 cities near you and calculate the distance between them</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># city1 = (lat1, lng1)</span>
<span class="co"># city2 = (lat2, lng2)</span>
<span class="co"># call the function and print the result</span></code></pre></div>
<hr />

</div>
</div>
<div id="third-party-modules" class="section level1">
<h1>Third-party Modules</h1>
<p>Python has a thriving ecosystem of third-party modules (i.e. libraries or packages) available for you to install. There are hundreds of thousands of such modules available for you to install and use.</p>
<div id="installing-third-party-libraries" class="section level2">
<h2>Installing third-party libraries</h2>
<p>Python comes with a package manager called <code>pip</code>. It can install all the packages listed at <a href="https://pypi.org/">PyPI (Python Package Index)</a>. To install a package using pip, you need to run a command like following in a Terminal or CMD prompt.</p>
<p><code>pip install &lt;package name&gt;</code></p>
<p>For this course, we are using Anancoda platform - which comes with its own package manager called <code>conda</code>. You can use Anaconda Navigator to search and install packages. Or run the command like following in a Terminal or CMD Prompt.</p>
<p><code>conda install &lt;package name&gt;</code></p>
<p>See this <a href="https://www.anaconda.com/blog/understanding-conda-and-pip">comparison of pip and conda</a> to understand the differences.</p>
</div>
<div id="calculating-distance-1" class="section level2">
<h2>Calculating Distance</h2>
<p>We have already installed the <code>geopy</code> package in our environment. <code>geopy</code> comes with functions that have already implemented many distance calculation formulae.</p>
<ul>
<li><code>distance.great_circle()</code>: Calculates the distance on a great circle using haversine formula</li>
<li><code>distance.geodesic()</code>: Calculates the distance using a chosen ellipsoid using vincenty’s formula</li>
</ul>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">from</span> geopy <span class="im">import</span> distance

san_francisco <span class="op">=</span> (<span class="fl">37.7749</span>, <span class="op">-</span><span class="fl">122.4194</span>)
new_york <span class="op">=</span> (<span class="fl">40.661</span>, <span class="op">-</span><span class="fl">73.944</span>)

straight_line_distance <span class="op">=</span> distance.great_circle(san_francisco, new_york)
ellipsoid_distance <span class="op">=</span> distance.geodesic(san_francisco, new_york, ellipsoid<span class="op">=</span><span class="st">&#39;WGS-84&#39;</span>)

<span class="bu">print</span>(straight_line_distance, ellipsoid_distance)</code></pre></div>
<pre><code>4135.3804590061345 km 4145.446977549562 km</code></pre>
</div>
<div id="exercise-5" class="section level2">
<h2>Exercise</h2>
<p>Repeat the distance calculation exercise from the previous module but perform the calculation using the geopy library.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="co"># city1 = (lat1, lng1)</span>
<span class="co"># city2 = (lat2, lng2)</span>
<span class="co"># call the geopy distance function and print the great circle and ellipsoid distance</span></code></pre></div>
<hr />

</div>
</div>
<div id="loops-and-conditionals" class="section level1">
<h1>Loops and Conditionals</h1>
<div id="for-loops" class="section level2">
<h2>For Loops</h2>
<p>A for loop is used for iterating over a sequence. The sequence can be a list, a tuple, a dictionary, a set, or a string.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">cities <span class="op">=</span> [<span class="st">&#39;San Francisco&#39;</span>, <span class="st">&#39;Los Angeles&#39;</span>, <span class="st">&#39;New York&#39;</span>, <span class="st">&#39;Atlanta&#39;</span>]

<span class="cf">for</span> city <span class="kw">in</span> cities:
    <span class="bu">print</span>(city)</code></pre></div>
<pre><code>San Francisco
Los Angeles
New York
Atlanta</code></pre>
<p>To iterate over a dictionary, you can call the <code>items()</code> method on it which returns a tuple of key and value for each item.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">data <span class="op">=</span> {<span class="st">&#39;city&#39;</span>: <span class="st">&#39;San Francisco&#39;</span>, <span class="st">&#39;population&#39;</span>: <span class="dv">881549</span>, <span class="st">&#39;coordinates&#39;</span>: (<span class="op">-</span><span class="fl">122.4194</span>, <span class="fl">37.7749</span>) }

<span class="cf">for</span> key, value <span class="kw">in</span> data.items():
    <span class="bu">print</span>(key, value)</code></pre></div>
<pre><code>city San Francisco
population 881549
coordinates (-122.4194, 37.7749)</code></pre>
<p>The built-in <code>range()</code> function allows you to create sequence of numbers that you can iterate over</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):
    <span class="bu">print</span>(x)</code></pre></div>
<pre><code>0
1
2
3
4</code></pre>
<p>The range function can also take a start and an end number</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">10</span>):
    <span class="bu">print</span>(x)</code></pre></div>
<pre><code>1
2
3
4
5
6
7
8
9</code></pre>
</div>
</div>
<div id="conditionals" class="section level1">
<h1>Conditionals</h1>
<p>Python supports logical conditions such as equals, not equals, greater than etc. These conditions can be used in several ways, most commonly in <em>if statements</em> and loops.</p>
<p>An <em>if statement</em> is written by using the <code>if</code> keyword.</p>
<p>Note: A very common error that programmers make is to use <em>=</em> to evaluate a <em>equals to</em> condition. The <em>=</em> in Python means assignment, not equals to. Always ensure that you use the <em>==</em> for an equals to condition.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> city <span class="kw">in</span> cities:
    <span class="cf">if</span> city <span class="op">==</span> <span class="st">&#39;Atlanta&#39;</span>:
        <span class="bu">print</span>(city)</code></pre></div>
<pre><code>Atlanta</code></pre>
<p>You can use <code>else</code> keywords along with <code>if</code> to match elements that do not meet the condition</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> city <span class="kw">in</span> cities:
    <span class="cf">if</span> city <span class="op">==</span> <span class="st">&#39;Atlanta&#39;</span>:
        <span class="bu">print</span>(city)
    <span class="cf">else</span>:
        <span class="bu">print</span>(<span class="st">&#39;This is not Atlanta&#39;</span>)</code></pre></div>
<pre><code>This is not Atlanta
This is not Atlanta
This is not Atlanta
Atlanta</code></pre>
<p>Python relies on indentation (whitespace at the beginning of a line) to define scope in the for loop and if statements. So make sure your code is properly indented.</p>
<p>You can evaluate a series of conditions using the <code>elif</code> keyword.</p>
<p>Multiple criteria can be combined using the <code>and</code> and <code>or</code> keywords.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">cities_population <span class="op">=</span> {
    <span class="st">&#39;San Francisco&#39;</span>: <span class="dv">881549</span>,
    <span class="st">&#39;Los Angeles&#39;</span>: <span class="dv">3792621</span>,
    <span class="st">&#39;New York&#39;</span>: <span class="dv">8175133</span>,
    <span class="st">&#39;Atlanta&#39;</span>:<span class="dv">498044</span>
}

<span class="cf">for</span> city, population <span class="kw">in</span> cities_population.items():
    <span class="cf">if</span> population <span class="op">&lt;</span> <span class="dv">1000000</span>:
        <span class="bu">print</span>(<span class="st">&#39;</span><span class="sc">{}</span><span class="st"> is a small city&#39;</span>.<span class="bu">format</span>(city))
    <span class="cf">elif</span> population <span class="op">&gt;</span> <span class="dv">1000000</span> <span class="kw">and</span> population <span class="op">&lt;</span> <span class="dv">5000000</span>:
        <span class="bu">print</span>(<span class="st">&#39;</span><span class="sc">{}</span><span class="st"> is a big city&#39;</span>.<span class="bu">format</span>(city))
    <span class="cf">else</span>:
        <span class="bu">print</span>(<span class="st">&#39;</span><span class="sc">{}</span><span class="st"> is a mega city&#39;</span>.<span class="bu">format</span>(city))</code></pre></div>
<pre><code>San Francisco is a small city
Los Angeles is a big city
New York is a mega city
Atlanta is a small city</code></pre>
<div id="control-statements" class="section level2">
<h2>Control Statements</h2>
<p>A for-loop iterates over each item in the sequence. Sometimes is desirable to stop the execution, or skip certain parts of the for-loops. Python has special statements, <code>break</code>, <code>continue</code> and <code>pass</code>.</p>
<p>A <code>break</code> statement will stop the loop and exit out of it</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> city <span class="kw">in</span> cities:
    <span class="bu">print</span>(city)
    <span class="cf">if</span> city <span class="op">==</span> <span class="st">&#39;Los Angeles&#39;</span>:
        <span class="bu">print</span>(<span class="st">&#39;I found Los Angeles&#39;</span>)
        <span class="cf">break</span></code></pre></div>
<pre><code>San Francisco
Los Angeles
I found Los Angeles</code></pre>
<p>A <code>continue</code> statement will skip the remaining part of the loop and go to the next iteration</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> city <span class="kw">in</span> cities:
    <span class="cf">if</span> city <span class="op">==</span> <span class="st">&#39;Los Angeles&#39;</span>:
        <span class="cf">continue</span>
    <span class="bu">print</span>(city)</code></pre></div>
<pre><code>San Francisco
New York
Atlanta</code></pre>
<p>A <code>pass</code> statement doesn’t do anything. It is useful when some code is required to complete the syntax, but you do not want any code to execute. It is typically used as a placeholder when a function is not complete.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">for</span> city <span class="kw">in</span> cities:
    <span class="cf">if</span> city <span class="op">==</span> <span class="st">&#39;Los Angeles&#39;</span>:
        <span class="cf">pass</span>
    <span class="cf">else</span>:
        <span class="bu">print</span>(city)</code></pre></div>
</div>
<div id="exercise-6" class="section level2">
<h2>Exercise</h2>
<p>The Fizz Buzz challenge.</p>
<p>Write a program that prints the numbers from 1 to 100 and for multiples of 3 print <strong>Fizz</strong> instead of the number and for the multiples of 5 print <strong>Buzz</strong>. If it is divisible by both, print <strong>FizzBuzz</strong>.</p>
<p>So the output should be something like below</p>
<p><code>1, 2, Fizz, 4, Buzz, Fizz, 7, 8, Fizz, Buzz, 11, Fizz, 13, 14, ...</code></p>
<p>Breaking down the problem further, we need to create for-loop with following conditions</p>
<ul>
<li>If the number is a multiple of both 3 and 5 (i.e. 15), print FizzBuzz</li>
<li>If the number is multiple of 3, print Fizz</li>
<li>If the number is multiple of 5, print Buzz</li>
<li>Otherwise print the number</li>
</ul>
<p>Hint: Use the modulus operator <strong>%</strong> to check if a number is divisible by another. <code>10 % 5</code> is 0, meaning it is divisible by 5.</p>
<hr />

</div>
</div>
<div id="reading-files" class="section level1">
<h1>Reading Files</h1>
<p>Python provides built-in functions for reading and writing files.</p>
<p>To read a file, we must know the path of the file on the disk. Python has a module called <code>os</code> that has helper functions that helps dealing with the the operating system. Advantage of using the <code>os</code> module is that the code you write will work without change on any suppored operating systems.</p>
<p>We can use the <code>os</code> module to find the path to your home folder using the <code>os.path.expanduser()</code> method. The symbol <code>~</code> refers to the home directory for the user.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> os</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">home_dir <span class="op">=</span> os.path.expanduser(<span class="st">&#39;~&#39;</span>)
<span class="bu">print</span>(home_dir)</code></pre></div>
<pre><code>/Users/ujaval</code></pre>
<p>To open a file, we need to know the full path to the file. We will now open and read the file <code>worldcitites.csv</code> located in your data package. Assuming the data package is extracted to the <code>Downloads/</code> directory. We can construct the full path to the file using the <code>os.path.join()</code> method.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">data_pkg_path <span class="op">=</span> <span class="st">&#39;Downloads/python_foundation/&#39;</span>
filename <span class="op">=</span> <span class="st">&#39;worldcities.csv&#39;</span>
path <span class="op">=</span> os.path.join(home_dir, data_pkg_path, filename)
<span class="bu">print</span>(path)</code></pre></div>
<pre><code>/Users/ujaval/Downloads/python_foundation/worldcities.csv</code></pre>
<p>To open the file, use the built-in <code>open()</code> function. We specify the <em>mode</em> as <code>r</code> which means read-only. If we wanted to change the file contents or write a new file, we would open it with <code>w</code> mode.</p>
<p>The open() function returns a file object. We can call the <code>readline()</code> method for reading the content of the file, one line at a time.</p>
<p>It is a good practice to always close the file when you are done with it. To close the file, we must call the <code>close()</code> method on the file object.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">f <span class="op">=</span> <span class="bu">open</span>(path, <span class="st">&#39;r&#39;</span>)
<span class="bu">print</span>(f.readline())
<span class="bu">print</span>(f.readline())
f.close()</code></pre></div>
<pre><code>&quot;city&quot;,&quot;city_ascii&quot;,&quot;lat&quot;,&quot;lng&quot;,&quot;country&quot;,&quot;iso2&quot;,&quot;iso3&quot;,&quot;admin_name&quot;,&quot;capital&quot;,&quot;population&quot;,&quot;id&quot;

&quot;Tokyo&quot;,&quot;Tokyo&quot;,&quot;35.6850&quot;,&quot;139.7514&quot;,&quot;Japan&quot;,&quot;JP&quot;,&quot;JPN&quot;,&quot;Tōkyō&quot;,&quot;primary&quot;,&quot;35676000&quot;,&quot;1392685764&quot;</code></pre>
<p>Calling <code>readline()</code> for each line of the file is tedious. Ideally, we want to loop through all the lines in file. You can iterate through the file object like below.</p>
<p>We can loop through each line of the file and increase the <code>count</code> variable by 1 for each iteration of the loop. At the end, the count variable’s value will be equal to the number of lines in the file.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">f <span class="op">=</span> <span class="bu">open</span>(path, <span class="st">&#39;r&#39;</span>)

count <span class="op">=</span> <span class="dv">0</span>
<span class="cf">for</span> line <span class="kw">in</span> f:
    count <span class="op">+=</span> <span class="dv">1</span>
f.close()
<span class="bu">print</span>(count)</code></pre></div>
<pre><code>15494</code></pre>
<div id="exercise-7" class="section level2">
<h2>Exercise</h2>
<p>Print first 5 lines of the file.</p>
<ul>
<li>Hint: Use break statement</li>
</ul>
<hr />

</div>
</div>
<div id="reading-csv-files" class="section level1">
<h1>Reading CSV Files</h1>
<p>Comma-separated Values (CSV) are the most common text-based file format for sharing geospatial data. The structure of the file is 1 data record per line, with individual <em>columns</em> separated by a comma.</p>
<p>In general, the separator character is called a delimiter. Other popular delimiters include the tab (\t), colon (:) and semi-colon (;) characters.</p>
<p>Reading CSV file properly requires us to know which delimiter is being used, along with quote character to surround the field values that contain space of the delimiter character. Since reading delimited text file is a very common operation, and can be tricky to handle all the corner cases, Python comes with its own library called <code>csv</code> for easy reading and writing of CSV files. To use it, you just have to import it.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> csv</code></pre></div>
<p>The preferred way to read CSV files is using the <code>DictReader()</code> method. Which directly reads each row and creates a dictionary from it - with column names as <em>key</em> and column values as <em>value</em>. Let’s see how to read a file using the <code>csv.DictReader()</code> method.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> os
home_dir <span class="op">=</span> os.path.expanduser(<span class="st">&#39;~&#39;</span>)
data_pkg_path <span class="op">=</span> <span class="st">&#39;Downloads/python_foundation/&#39;</span>
filename <span class="op">=</span> <span class="st">&#39;worldcities.csv&#39;</span>
path <span class="op">=</span> os.path.join(home_dir, data_pkg_path, filename)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">f <span class="op">=</span> <span class="bu">open</span>(path, <span class="st">&#39;r&#39;</span>)
csv_reader <span class="op">=</span> csv.DictReader(f, delimiter<span class="op">=</span><span class="st">&#39;,&#39;</span>, quotechar<span class="op">=</span><span class="st">&#39;&quot;&#39;</span>)
<span class="bu">print</span>(csv_reader)
f.close()</code></pre></div>
<pre><code>&lt;csv.DictReader object at 0x10dfcee90&gt;</code></pre>
<div id="using-enumerate-function" class="section level2">
<h2>Using <code>enumerate()</code> function</h2>
<p>When iterating over an object, many times we need a counter. We saw in the previous example, how to use a variable like <code>count</code> and increase it with every iteration. There is an easy way to do this using the built-in <code>enumerate()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">cities <span class="op">=</span> [<span class="st">&#39;San Francisco&#39;</span>, <span class="st">&#39;Los Angeles&#39;</span>, <span class="st">&#39;New York&#39;</span>, <span class="st">&#39;Atlanta&#39;</span>]
<span class="cf">for</span> x <span class="kw">in</span> <span class="bu">enumerate</span>(cities):
    <span class="bu">print</span>(x)</code></pre></div>
<pre><code>(0, &#39;San Francisco&#39;)
(1, &#39;Los Angeles&#39;)
(2, &#39;New York&#39;)
(3, &#39;Atlanta&#39;)</code></pre>
<p>We can use enumerate() on any iterable object and get a tuple with an index and the iterable value with each iteration. Let’s use it to print the first 5 lines from the DictReader object.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">f <span class="op">=</span> <span class="bu">open</span>(path, <span class="st">&#39;r&#39;</span>)
csv_reader <span class="op">=</span> csv.DictReader(f, delimiter<span class="op">=</span><span class="st">&#39;,&#39;</span>, quotechar<span class="op">=</span><span class="st">&#39;&quot;&#39;</span>)
<span class="cf">for</span> index, row <span class="kw">in</span> <span class="bu">enumerate</span>(csv_reader):
    <span class="bu">print</span>(row)
    <span class="cf">if</span> index <span class="op">==</span> <span class="dv">4</span>:
        <span class="cf">break</span>
f.close()</code></pre></div>
<pre><code>OrderedDict([(&#39;city&#39;, &#39;Tokyo&#39;), (&#39;city_ascii&#39;, &#39;Tokyo&#39;), (&#39;lat&#39;, &#39;35.6850&#39;), (&#39;lng&#39;, &#39;139.7514&#39;), (&#39;country&#39;, &#39;Japan&#39;), (&#39;iso2&#39;, &#39;JP&#39;), (&#39;iso3&#39;, &#39;JPN&#39;), (&#39;admin_name&#39;, &#39;Tōkyō&#39;), (&#39;capital&#39;, &#39;primary&#39;), (&#39;population&#39;, &#39;35676000&#39;), (&#39;id&#39;, &#39;1392685764&#39;)])
OrderedDict([(&#39;city&#39;, &#39;New York&#39;), (&#39;city_ascii&#39;, &#39;New York&#39;), (&#39;lat&#39;, &#39;40.6943&#39;), (&#39;lng&#39;, &#39;-73.9249&#39;), (&#39;country&#39;, &#39;United States&#39;), (&#39;iso2&#39;, &#39;US&#39;), (&#39;iso3&#39;, &#39;USA&#39;), (&#39;admin_name&#39;, &#39;New York&#39;), (&#39;capital&#39;, &#39;&#39;), (&#39;population&#39;, &#39;19354922.0&#39;), (&#39;id&#39;, &#39;1840034016&#39;)])
OrderedDict([(&#39;city&#39;, &#39;Mexico City&#39;), (&#39;city_ascii&#39;, &#39;Mexico City&#39;), (&#39;lat&#39;, &#39;19.4424&#39;), (&#39;lng&#39;, &#39;-99.1310&#39;), (&#39;country&#39;, &#39;Mexico&#39;), (&#39;iso2&#39;, &#39;MX&#39;), (&#39;iso3&#39;, &#39;MEX&#39;), (&#39;admin_name&#39;, &#39;Ciudad de México&#39;), (&#39;capital&#39;, &#39;primary&#39;), (&#39;population&#39;, &#39;19028000&#39;), (&#39;id&#39;, &#39;1484247881&#39;)])
OrderedDict([(&#39;city&#39;, &#39;Mumbai&#39;), (&#39;city_ascii&#39;, &#39;Mumbai&#39;), (&#39;lat&#39;, &#39;19.0170&#39;), (&#39;lng&#39;, &#39;72.8570&#39;), (&#39;country&#39;, &#39;India&#39;), (&#39;iso2&#39;, &#39;IN&#39;), (&#39;iso3&#39;, &#39;IND&#39;), (&#39;admin_name&#39;, &#39;Mahārāshtra&#39;), (&#39;capital&#39;, &#39;admin&#39;), (&#39;population&#39;, &#39;18978000&#39;), (&#39;id&#39;, &#39;1356226629&#39;)])
OrderedDict([(&#39;city&#39;, &#39;São Paulo&#39;), (&#39;city_ascii&#39;, &#39;Sao Paulo&#39;), (&#39;lat&#39;, &#39;-23.5587&#39;), (&#39;lng&#39;, &#39;-46.6250&#39;), (&#39;country&#39;, &#39;Brazil&#39;), (&#39;iso2&#39;, &#39;BR&#39;), (&#39;iso3&#39;, &#39;BRA&#39;), (&#39;admin_name&#39;, &#39;São Paulo&#39;), (&#39;capital&#39;, &#39;admin&#39;), (&#39;population&#39;, &#39;18845000&#39;), (&#39;id&#39;, &#39;1076532519&#39;)])</code></pre>
</div>
<div id="using-with-statement" class="section level2">
<h2>Using <code>with</code> statement</h2>
<p>The code for file handling requires we open a file, do something with the file object and then close the file. That is tedious and it is possible that you may forget to call <code>close()</code> on the file. If the code for processing encounters an error the file is not closed property, it may result in bugs - especially when writing files.</p>
<p>The preferred way to work with file objects is using the <code>with</code> statement. It results in simpler and cleaer code - which also ensures file objects are closed properly in case of errors.</p>
<p>As you see below, we open the file and use the file object <code>f</code> in a <code>with</code> statement. Python takes care of closing the file when the execution of code within the statement is complete.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="cf">with</span> <span class="bu">open</span>(path, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> f:
    csv_reader <span class="op">=</span> csv.DictReader(f)</code></pre></div>
</div>
<div id="filtering-rows" class="section level2">
<h2>Filtering rows</h2>
<p>We can use conditional statement while iterating over the rows, to select and process rows that meet certain criterial. Let’s count how many cities from a particular country are present in the file.</p>
<p>Replace the <code>home_country</code> variable with your home country below.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">home_country <span class="op">=</span> <span class="st">&#39;India&#39;</span>
num_cities <span class="op">=</span> <span class="dv">0</span>

<span class="cf">with</span> <span class="bu">open</span>(path, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> f:
    csv_reader <span class="op">=</span> csv.DictReader(f)

    <span class="cf">for</span> row <span class="kw">in</span> csv_reader:
        <span class="cf">if</span> row[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> home_country:
            num_cities <span class="op">+=</span> <span class="dv">1</span>
            
<span class="bu">print</span>(num_cities)</code></pre></div>
<pre><code>212</code></pre>
</div>
<div id="calculating-distance-2" class="section level2">
<h2>Calculating distance</h2>
<p>Let’s apply the skills we have learnt so far to solve a complete problem. We want to read the <code>worldcities.csv</code> file, find all cities within a home country, calculate the distance to each cities from a home city and write the results to a new CSV file.</p>
<p>First we find the coordinates of the out selected <code>home_city</code> from the file. Replace the <code>home_city</code> below with your hometown or a large city within your country. Note that we are using the <code>city_ascii</code> field for city name comparison, so make sure the <code>home_city</code> variable contains the ASCII version of the city name.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">home_city <span class="op">=</span> <span class="st">&#39;Bengaluru&#39;</span>

home_city_coordinates <span class="op">=</span> ()

<span class="cf">with</span> <span class="bu">open</span>(path, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> f:
    csv_reader <span class="op">=</span> csv.DictReader(f)
    <span class="cf">for</span> row <span class="kw">in</span> csv_reader:
        <span class="cf">if</span> row[<span class="st">&#39;city_ascii&#39;</span>] <span class="op">==</span> home_city:
            lat <span class="op">=</span> row[<span class="st">&#39;lat&#39;</span>]
            lng <span class="op">=</span> row[<span class="st">&#39;lng&#39;</span>]
            home_city_coordinates <span class="op">=</span> (lat, lng)
            <span class="cf">break</span>
        
<span class="bu">print</span>(home_city_coordinates)</code></pre></div>
<pre><code>(&#39;12.9700&#39;, &#39;77.5600&#39;)</code></pre>
<p>Now we can loop through the file, find a city in the chosen home country and call the <code>geopy.distance.geodesic()</code> function to calculate the distance. In the code below, we are just computing first 5 matches.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">from</span> geopy <span class="im">import</span> distance

counter <span class="op">=</span> <span class="dv">0</span>
<span class="cf">with</span> <span class="bu">open</span>(path, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> f:
    csv_reader <span class="op">=</span> csv.DictReader(f)
    <span class="cf">for</span> row <span class="kw">in</span> csv_reader:
        <span class="cf">if</span> (row[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> home_country <span class="kw">and</span>
            row[<span class="st">&#39;city_ascii&#39;</span>] <span class="op">!=</span> home_city):
            city_coordinates <span class="op">=</span> (row[<span class="st">&#39;lat&#39;</span>], row[<span class="st">&#39;lng&#39;</span>])
            city_distance <span class="op">=</span> distance.geodesic(
                city_coordinates, home_city_coordinates).km
            <span class="bu">print</span>(row[<span class="st">&#39;city_ascii&#39;</span>], city_distance)
            counter <span class="op">+=</span> <span class="dv">1</span>
            
        <span class="cf">if</span> counter <span class="op">==</span> <span class="dv">5</span>:
            <span class="cf">break</span>
            </code></pre></div>
<pre><code>Mumbai 837.1857087990928
Delhi 1738.638855782645
Kolkata 1552.6378233436674
Chennai 295.3401073046679
Hyderabad 500.0477286304823</code></pre>
</div>
<div id="writing-files" class="section level2">
<h2>Writing files</h2>
<p>Instead of printing the results, let’s write the results to a new file. Similar to csv.DictReader(), there is a companion <code>csv.DictWriter()</code> method to write files. We create a <code>csv_writer</code> object and then write rows to it using the <code>writerow()</code> method.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">output_filename <span class="op">=</span> <span class="st">&#39;cities_distance.csv&#39;</span>
output_dir <span class="op">=</span> <span class="st">&#39;Downloads&#39;</span>
output_path <span class="op">=</span> os.path.join(home_dir, output_dir, output_filename)

<span class="cf">with</span> <span class="bu">open</span>(output_path, mode<span class="op">=</span><span class="st">&#39;w&#39;</span>) <span class="im">as</span> output_file:
    fieldnames <span class="op">=</span> [<span class="st">&#39;city&#39;</span>, <span class="st">&#39;distance_from_home&#39;</span>]
    csv_writer <span class="op">=</span> csv.DictWriter(output_file, fieldnames<span class="op">=</span>fieldnames)
    csv_writer.writeheader()
    
    <span class="co"># Now we read the input file, calculate distance and</span>
    <span class="co"># write a row to the output </span>
    <span class="cf">with</span> <span class="bu">open</span>(path, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> f:
        csv_reader <span class="op">=</span> csv.DictReader(f)
        <span class="cf">for</span> row <span class="kw">in</span> csv_reader:
            <span class="cf">if</span> (row[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> home_country <span class="kw">and</span>
                row[<span class="st">&#39;city_ascii&#39;</span>] <span class="op">!=</span> home_city):
                city_coordinates <span class="op">=</span> (row[<span class="st">&#39;lat&#39;</span>], row[<span class="st">&#39;lng&#39;</span>])
                city_distance <span class="op">=</span> distance.geodesic(
                    city_coordinates, home_city_coordinates).km
                csv_writer.writerow(
                    {<span class="st">&#39;city&#39;</span>: row[<span class="st">&#39;city_ascii&#39;</span>],
                     <span class="st">&#39;distance_from_home&#39;</span>: city_distance}
                )</code></pre></div>
<p>Below is the complete code for our task of reading a file, filtering it, calculating distance and writing the results to a file.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> os
<span class="im">from</span> geopy <span class="im">import</span> distance

home_dir <span class="op">=</span> os.path.expanduser(<span class="st">&#39;~&#39;</span>)

input_filename <span class="op">=</span> <span class="st">&#39;worldcities.csv&#39;</span>
input_dir <span class="op">=</span> <span class="st">&#39;Downloads/python_foundation/&#39;</span>
input_path <span class="op">=</span> os.path.join(home_dir, data_pkg_path, filename)

output_filename <span class="op">=</span> <span class="st">&#39;cities_distance.csv&#39;</span>
output_dir <span class="op">=</span> <span class="st">&#39;Downloads&#39;</span>
output_path <span class="op">=</span> os.path.join(home_dir, output_dir, output_filename)

home_city <span class="op">=</span> <span class="st">&#39;Bengaluru&#39;</span>
home_country <span class="op">=</span> <span class="st">&#39;India&#39;</span>

<span class="cf">with</span> <span class="bu">open</span>(input_path, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> input_file:
    csv_reader <span class="op">=</span> csv.DictReader(input_file)
    <span class="cf">for</span> row <span class="kw">in</span> csv_reader:
        <span class="cf">if</span> row[<span class="st">&#39;city_ascii&#39;</span>] <span class="op">==</span> home_city:
            home_city_coordinates <span class="op">=</span> (row[<span class="st">&#39;lat&#39;</span>], row[<span class="st">&#39;lng&#39;</span>])
            <span class="cf">break</span>

<span class="cf">with</span> <span class="bu">open</span>(output_path, mode<span class="op">=</span><span class="st">&#39;w&#39;</span>) <span class="im">as</span> output_file:
    fieldnames <span class="op">=</span> [<span class="st">&#39;city&#39;</span>, <span class="st">&#39;distance_from_home&#39;</span>]
    csv_writer <span class="op">=</span> csv.DictWriter(output_file, fieldnames<span class="op">=</span>fieldnames)
    csv_writer.writeheader()

    <span class="cf">with</span> <span class="bu">open</span>(input_path, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> input_file:
        csv_reader <span class="op">=</span> csv.DictReader(input_file)
        <span class="cf">for</span> row <span class="kw">in</span> csv_reader:
            <span class="cf">if</span> (row[<span class="st">&#39;country&#39;</span>] <span class="op">==</span> home_country <span class="kw">and</span>
                row[<span class="st">&#39;city_ascii&#39;</span>] <span class="op">!=</span> home_city):
                city_coordinates <span class="op">=</span> (row[<span class="st">&#39;lat&#39;</span>], row[<span class="st">&#39;lng&#39;</span>])
                city_distance <span class="op">=</span> distance.geodesic(
                    city_coordinates, home_city_coordinates).km
                csv_writer.writerow(
                    {<span class="st">&#39;city&#39;</span>: row[<span class="st">&#39;city_ascii&#39;</span>],
                     <span class="st">&#39;distance_from_home&#39;</span>: city_distance}
                )

<span class="bu">print</span>(<span class="st">&#39;Successfully written output file at </span><span class="sc">{}</span><span class="st">&#39;</span>.<span class="bu">format</span>(output_path))</code></pre></div>
<pre><code>Successfully written output file at /Users/ujaval/Downloads/cities_distance.csv</code></pre>
</div>
<div id="exercise-8" class="section level2">
<h2>Exercise</h2>
<p>Let’s say we want to repeat the same process for another city. Or maybe all the cities in a country. The code above would require us to change the <code>home_city</code>, <code>home_country</code> and <code>output_filename</code> variables for the new city and run the code again manually.</p>
<p>Instead, we can create a <em>function</em> that does the operation based on given city name.</p>
<pre><code>def write_distance_file(home_city, home_country, output_filename):
    ....
    ....
    print(&#39;Successfully written output file at {}&#39;.format(output_path))</code></pre>
<p>Then we can call the function like below</p>
<pre><code>write_distance_file(&#39;Frankfurt&#39;, &#39;Germany&#39;, &#39;frankfurt_distance.csv&#39;)
write_distance_file(&#39;New York&#39;, &#39;United States&#39;, &#39;nyc_distance.csv&#39;)</code></pre>
<p>Insert a new code cell below and create the <code>write_distance_file</code> function below. Then call it to create the output file as show.</p>
<hr />

</div>
</div>
<div id="license" class="section level1">
<h1>License</h1>
<p>This course material is licensed under a <a href="https://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>. You are free to use the material for any non-commercial purpose. Kindly give appropriate credit to the original author</p>
<p>If you would like to use this material for commercial use or for teaching a course, kindly <a href="https://spatialthoughts.com/contact/">contact me</a> for terms.</p>
<p>© 2020 Ujaval Gandhi <a href="https://spatialthoughts.com">www.spatialthoughts.com</a></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
